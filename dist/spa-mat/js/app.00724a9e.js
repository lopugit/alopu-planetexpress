(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(t,e,i){t.exports=i("2f39")},"0940":function(t,e,i){"use strict";var o=i("939d"),n=i.n(o);n.a},15:function(t,e){},16:function(t,e){},"1e5d":function(t,e,i){},"2ae2":function(t,e,i){"use strict";var o=i("c1fa"),n=i.n(o);n.a},"2b3b":function(t,e,i){},"2f39":function(t,e,i){"use strict";i.r(e);var o={};i.r(o),i.d(o,"getUsername",function(){return x}),i.d(o,"latestCached",function(){return I});var n={};i.r(n),i.d(n,"interactionStarted",function(){return $}),i.d(n,"addCachedState",function(){return j}),i.d(n,"isAuthenticated",function(){return O}),i.d(n,"entitySet",function(){return F}),i.d(n,"navSet",function(){return U}),i.d(n,"sandboxThingSet",function(){return E}),i.d(n,"entityInventorySet",function(){return M}),i.d(n,"newAuthLog",function(){return q}),i.d(n,"entityMessageUpdate",function(){return N}),i.d(n,"SetRealms",function(){return D}),i.d(n,"SetThingTypes",function(){return z}),i.d(n,"addPage",function(){return P}),i.d(n,"resetSandboxThing",function(){return L}),i.d(n,"showLoginOptions",function(){return V}),i.d(n,"passwordConfirmation",function(){return B}),i.d(n,"mainDrawer",function(){return Y}),i.d(n,"entity",function(){return R}),i.d(n,"pageHistory",function(){return H});var s={};i.r(s),i.d(s,"entity",function(){return X}),i.d(s,"userAgentNormalised",function(){return Z}),i.d(s,"username",function(){return Q}),i.d(s,"ego",function(){return tt}),i.d(s,"cover",function(){return et}),i.d(s,"loggedIn",function(){return it});var r={};i.r(r),i.d(r,"setSchema",function(){return rt}),i.d(r,"feedback",function(){return at}),i.d(r,"removefeedback",function(){return ct}),i.d(r,"dialog",function(){return ut}),i.d(r,"removedialog",function(){return dt}),i.d(r,"registerable",function(){return lt}),i.d(r,"entity",function(){return gt}),i.d(r,"userAgent",function(){return pt}),i.d(r,"updateEntityUserAgent",function(){return ht}),i.d(r,"env",function(){return ft}),i.d(r,"clientId",function(){return mt});var a={};i.r(a),i.d(a,"switchUser",function(){return jt}),i.d(a,"checkUsernameAvailability",function(){return Ot}),i.d(a,"switchUserSuccess",function(){return Ft}),i.d(a,"switchUserFailure",function(){return Ut}),i.d(a,"login",function(){return Et}),i.d(a,"logout",function(){return Mt}),i.d(a,"logoutSuccess",function(){return qt}),i.d(a,"logoutFail",function(){return Nt}),i.d(a,"buildDefaultEntity",function(){return Dt}),i.d(a,"resetEntity",function(){return zt}),i.d(a,"userAgentSync",function(){return Pt}),i.d(a,"syncDevice",function(){return Lt}),i.d(a,"manifestClientId",function(){return Vt});i("ac6a"),i("4a91"),i("a114"),i("d14b"),i("1e5d"),i("7e6d");var c=i("2b0e"),u=i("e083");c["a"].use(u["b"],{config:{}});var d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"app",attrs:{id:"q-app"}},[i("router-view")],1)},l=[];d._withStripped=!0;i("28a5");var g=i("7037"),p=i.n(g),h=(i("ac4d"),i("8a81"),i("551c"),{data:function(){return{}},methods:{setThing:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.option,o=e.list,n=void 0===o?this.thingMutable.things:o,s=e.obj,r=void 0!==s&&s,a=e.key,c=void 0===a?"_id":a,u=e.keymatchtype,d=e.push,l=e.strings,g=e.targets;return new Promise(function(e,o){var s=t.thingIndex({option:i,list:n,obj:r,key:c,keymatchtype:u,strings:l});if(s>=0&&n)if(g)for(var a=0;a<g.length;a++)n[s][g[a]]=i[g[a]];else n.splice(s,1,i);else d&&n&&n.push(i);e()})},setThings:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.options,o=e.list,n=void 0===o?this.thingMutable.things:o,s=e.obj,r=void 0!==s&&s,a=e.key,c=void 0===a?"_id":a,u=e.keymatchtype,d=e.push;return new Promise(function(e,o){if(i&&n){var s=!0,a=!1,l=void 0;try{for(var g,p=i[Symbol.iterator]();!(s=(g=p.next()).done);s=!0){var h=g.value;t.setThing({option:h,list:n,obj:r,key:c,keymatchtype:u,push:d})}}catch(t){a=!0,l=t}finally{try{s||null==p.return||p.return()}finally{if(a)throw l}}}e()})},optIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",n=arguments.length>4?arguments[4]:void 0;if(!i&&e&&e.indexOf(t)>=0)return!0;if(i&&e)for(var s=0;s<e.length;s++)if("object"==p()(o)){for(var r=0;r<o.length;r++)if("broad"==n){if(e[s]&&this.getsmart(e[s],o[r],void 0)==this.getsmart(t,o[r],void 0)&&void 0!==this.getsmart(e[s],o[r],void 0))return!0;if(e[s]&&"string"==typeof e[s]&&e[s]==this.getsmart(t,o[r],void 0)&&void 0!==this.getsmart(t,o[r],void 0))return!0}else if(e[s]&&this.getsmart(e[s],o[r],void 0)==this.getsmart(t,o[r],void 0)&&void 0!==this.getsmart(e[s],o[r],void 0)){if(r==o.length-1)return!0}else if(e[s]&&"string"==typeof e[s]&&e[s]==this.getsmart(t,o[r],void 0)&&void 0!==this.getsmart(t,o[r],void 0)&&r==o.length-1)return!0}else if(e[s]&&e[s][o]==t[o]&&void 0!==e[s][o])return!0;return!1},thingIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,o=t.obj,n=void 0!==o&&o,s=t.key,r=void 0===s?"_id":s,a=t.keymatchtype,c=(t.strings,t.retIndex);if(!n&&i&&i.indexOf(e)>=0)return!c||i.indexOf(e);if(n&&i)for(var u=0;u<i.length;u++)if("object"==p()(r)){for(var d=0;d<r.length;d++)if("broad"==a){if(i[u]&&this.getsmart(i[u],r[d],void 0)==this.getsmart(e,r[d],void 0)&&void 0!==this.getsmart(i[u],r[d],void 0))return!c||u;if(i[u]&&"string"==typeof i[u]&&i[u]==this.getsmart(e,r[d],void 0)&&void 0!==this.getsmart(e,r[d],void 0))return!c||u}else if(i[u]&&this.getsmart(i[u],r[d],void 0)==this.getsmart(e,r[d],void 0)&&void 0!==this.getsmart(i[u],r[d],void 0)){if(d==r.length-1)return!c||u}else if(i[u]&&"string"==typeof i[u]&&i[u]==this.getsmart(e,r[d],void 0)&&void 0!==this.getsmart(e,r[d],void 0)&&d==r.length-1)return!c||u}else{if(i[u]&&i[u][r]==e[r]&&void 0!==i[u][r])return!c||u;if(i[u]&&"string"==typeof i[u]&&i[u]==e[r]&&void 0!==e[r])return!c||u}return!!c&&-1},optsIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",n=arguments.length>4?arguments[4]:void 0,s=!0,r=!1,a=void 0;try{for(var c,u=t[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;if(!i&&e&&e.indexOf(d)>=0);else{if(!i||!e)return!1;for(var l=0;l<e.length;l++)if(!this.optIn(d,e[l],i,o,n))return!1}}}catch(t){r=!0,a=t}finally{try{s||null==u.return||u.return()}finally{if(r)throw a}}return!0},thingsIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,o=void 0===i?this.optionsMutable:i,n=t.obj,s=void 0!==n&&n,r=t.key,a=void 0===r?"_id":r,c=t.keymatchtype,u=!0,d=!1,l=void 0;try{for(var g,p=e[Symbol.iterator]();!(u=(g=p.next()).done);u=!0){var h=g.value;if(!s&&o&&o.indexOf(h)>=0);else{if(!s||!o)return!1;for(var f=0;f<o.length;f++)if(!this.optIn(h,o[f],s,a,c))return!1}}}catch(t){d=!0,l=t}finally{try{u||null==p.return||p.return()}finally{if(d)throw l}}return!0},anyOptsIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",n=arguments.length>4?arguments[4]:void 0,s=!0,r=!1,a=void 0;try{for(var c,u=t[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;if(!i&&e&&e.indexOf(d)>=0)return!0;if(i&&e)for(var l=0;l<e.length;l++)if(this.optIn(d,e[l],i,o,n))return!0}}catch(t){r=!0,a=t}finally{try{s||null==u.return||u.return()}finally{if(r)throw a}}return!1},anyThingsIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,o=void 0===i?this.optionsMutable:i,n=t.obj,s=void 0!==n&&n,r=t.key,a=void 0===r?"_id":r,c=t.keymatchtype,u=!0,d=!1,l=void 0;try{for(var g,p=e[Symbol.iterator]();!(u=(g=p.next()).done);u=!0){var h=g.value;if(!s&&o&&o.indexOf(h)>=0)return!0;if(s&&o)for(var f=0;f<o.length;f++)if(this.optIn(h,o[f],s,a,c))return!0}}catch(t){d=!0,l=t}finally{try{u||null==p.return||p.return()}finally{if(d)throw l}}return!1},optIndex:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",n=arguments.length>4?arguments[4]:void 0;if(i&&e&&o){for(var s=0;s<e.length;s++)if(this.optIn(t,e,i,o,n))return s}else if(e)return e.indexOf(t);return-1},thingIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,o=t.obj,n=void 0!==o&&o,s=t.key,r=void 0===s?"_id":s,a=t.keymatchtype,c=t.strings;if(n&&i&&r){var u=this.thingIn({option:e,list:i,obj:n,key:r,keymatchtype:a,strings:c,retIndex:!0});return u}return i?i.indexOf(e):-1},pushOpt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id";"object"!=p()(e)||this.optIn(t,e,i,o)||e.push(t)},pushThing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,o=void 0===i?this.optionsMutable:i,n=t.obj,s=void 0!==n&&n,r=t.key,a=void 0===r?"_id":r;"object"!=p()(o)||this.optIn(e,o,s,a)||o.push(e)},pushOpts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",n=!0,s=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var u=a.value;this.pushOpt(u,e,i,o)}}catch(t){s=!0,r=t}finally{try{n||null==c.return||c.return()}finally{if(s)throw r}}},pushThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,o=void 0===i?this.optionsMutable:i,n=t.obj,s=void 0!==n&&n,r=t.key,a=void 0===r?"_id":r,c=!0,u=!1,d=void 0;try{for(var l,g=e[Symbol.iterator]();!(c=(l=g.next()).done);c=!0){var p=l.value;this.pushOpt(p,o,s,a)}}catch(t){u=!0,d=t}finally{try{c||null==g.return||g.return()}finally{if(u)throw d}}},popOpt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id";"object"==p()(e)&&this.optIn(t,e,i,o)&&e.splice(this.optIndex(t,e,i,o),1)},popThing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,o=void 0===i?this.optionsMutable:i,n=t.obj,s=void 0!==n&&n,r=t.key,a=void 0===r?"_id":r;"object"==p()(o)&&this.optIn(e,o,s,a)&&o.splice(this.optIndex(e,o,s,a),1)},popOpts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",n=!0,s=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var u=a.value;this.popOpt(u,e,i,o)}}catch(t){s=!0,r=t}finally{try{n||null==c.return||c.return()}finally{if(s)throw r}}},popThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,o=void 0===i?this.optionsMutable:i,n=t.obj,s=void 0!==n&&n,r=t.key,a=void 0===r?"_id":r,c=!0,u=!1,d=void 0;try{for(var l,g=e[Symbol.iterator]();!(c=(l=g.next()).done);c=!0){var p=l.value;this.popOpt(p,o,s,a)}}catch(t){u=!0,d=t}finally{try{c||null==g.return||g.return()}finally{if(u)throw d}}},toggleOpt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id";this.optIn(t,e,i,o)?this.popOpt(t,e,i,o):this.pushOpt(t,e,i,o)},toggleThing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,o=void 0===i?this.optionsMutable:i,n=t.obj,s=void 0!==n&&n,r=t.key,a=void 0===r?"_id":r;this.optIn(e,o,s,a)?this.popOpt(e,o,s,a):this.pushOpt(e,o,s,a)},toggleOpts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;for(var n in t)this.optIn(n,e,i,o)?this.popOpt(n,e,i,o):this.pushOpt(n,e,i,o)},toggleThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,o=void 0===i?this.optionsMutable:i,n=t.obj,s=t.key;for(var r in e)this.optIn(r,o,n,s)?this.popOpt(r,o,n,s):this.pushOpt(r,o,n,s)},ratchetOpt:function(t,e,i,o){},getsmart:function(t,e,i){"string"==typeof e&&(e=e.split("."));var o=function t(e,i,o){if(void 0===e||null===e)return o;if(0===i.length)return e;var n=e[i[0]],s=i.slice(1);return t(n,s,o)};return o(t,e,i)},safestring:function(t){return this.jsmart.stringify(t||"")},safeparse:function(t){return this.jsmart.parse(t||"")}}}),f={mixins:[h],name:"app",data:function(){return{siteTitle:"Planet Express"}},sockets:{connect:function(){},giveAuthenticate:function(t){console.log(t),t.entity&&t.auth?(t.entity.auth=!0,this.$store.commit("entitySet",t.entity)):(this.$store.commit("entitySet",{type:"temporary",identity:"anonymous",auth:!1,username:void 0}),t.err&&this.$store.commit("newAuthLog",{err:t.err,msg:"something went wrong authorizing the user"}))},giveRealms:function(t){t.id==this.uid&&this.$store.commit("SetRealms",t.realms)}},beforeCreated:function(){},created:function(){this.$store.dispatch("manifestClientId",this.$uuid.v4()),this.$store.dispatch("buildDefaultEntity"),this.$store.dispatch("userAgentSync",navigator.userAgent),this.initCursor(),this.$store.commit("env",this.$env),this.$store.dispatch("syncDevice","this")},methods:{initCursor:function(){var t=new n(function(){},0),e=new n(function(){},0),i=function(){var i=t.getTimeLeft();new n(function(){document.body.classList.add("cursor-pointer")},i),e=new n(function(){},i+200)},o=function(){var i=e.getTimeLeft();new n(function(){document.body.classList.remove("cursor-pointer")},i),t=new n(function(){},i+100),0};function n(t,e){var i,o,n,s=e;this.start=function(){n=!0,o=new Date,i=setTimeout(t,s)},this.pause=function(){n=!1,clearTimeout(i),s-=new Date-o},this.getTimeLeft=function(){return n&&(this.pause(),this.start()),s},this.getStateRunning=function(){return n},this.start()}document.body.onmousedown=i,document.body.onmouseup=o,console.log("%s was created",this.siteTitle),this.$socket.emit("getRealms",{id:this.uid,find:{},count:1/0})}},watch:{},components:{},computed:{navigator:{get:function(){return navigator}},entity:{get:function(){return this.$store.state.alopu.entity},set:function(t){this.$store.commit("entity",{entity:t})}},pageHistory:{get:function(){return this.$store.state.app.pageHistory},set:function(t){this.$store.commit("pageHistory",t)}}}},m=f,v=(i("cf25"),i("490c"),i("2877")),y=Object(v["a"])(m,d,l,!1,null,null,null);y.options.__file="App.vue";var b=y.exports,w=i("2f62"),k=i("0e44"),C={isAuthenticated:!1,authLogs:[],entityMessage:"welcome, <a href='/self'>"+(C&&C.entity?C.entity.username:"anonymous")+"</a>",realms:["all","public","free","philosophy"],pageHistory:[],thingTypes:["object","service","inventory","question","answer","moment"],types:["Array","String","Number","Boolean","Thing","Array of Arrays","Array of Booleans","Array of Numbers","Array of Things","Array of Strings","Thing of Arrays","Thing of Booleans","Thing of Numbers","Thing of Things","Thing of Strings"],thingNames:["fork","flashlight","book","food","vegan lesagne","sour strap","wallet","blanket","mattress"],priceUnits:["purchase","unit","use","click","second","minute","hour","day","cm","metre","km","mg","g","kg","tonne"],currencies:["AUD","USD","EUR","REN","YEN","RUP"],sideBarOptions:["closed"],ico:{sandboxThing:{title:"A lopu sandbox thing",description:"change as much as you want, the change's will still be here when you return",names:["a lopu ico sandbox thing","thing"]},sandboxThingSchema:{title:"A lopu sandbox thing",description:"change as much as you want, the change's will still be here when you return",names:["a lopu ico sandbox thing","thing"]}},test:{woo:Boolean,woo1:Array,woo2:[Array],woo3:{Array:Array},woo4:{hmm:Boolean,hmm1:Array,hmm2:[Object],hmm3:{Array:Array}}},cached:[[]],interactionStarted:!1,showLoginOptions:!1,mainDrawer:!1},A=C,S=i("3c2e")(),x=function(t){return S.getsmart(t,"entity.username",void 0)},I=function(t){if(t.cached.length){var e=t.cached[t.cached.length-1];return e&&e.constructor==Array?e:[]}return t.cached.push([]),t.cached[t.cached.length-1]},T=i("53bd"),_=i.n(T),$=function(t,e){t.interactionStarted=e},j=function(t,e){console.log("caching payload"),console.log(e),t.cached.length>=8&&(t.cached=t.cached.slice(t.cached.length-8,t.cached.length)),e&&e.constructor==Array&&t.cached.push(e)},O=function(t,e){t.isAuthenticated=e.isAuthenticated},F=function(t,e){t.entity=e},U=function(t,e){t.nav=e},E=function(t,e){t.ico.sandboxThing=e},M=function(t,e){t.entity.inventory=e},q=function(t,e){t.authLogs.push(e)},N=function(t,e){t.userMessage=e},D=function(t,e){t.realms=e},z=function(t,e){t.thingTypes=e},P=function(t,e){"string"===typeof e&&t.pageHistory.push(e)},L=function(t,e){if(e){var i=_.a.parse(_.a.stringify(t.ico.sandboxThingSchema));t.ico.sandboxThing=i}},V=function(t,e){"boolean"==typeof e&&(t.showLoginOptions=e)},B=function(t,e){t.passwordConfirmation=e},Y=function(t,e){"boolean"==typeof e&&(t.mainDrawer=e)},R=function(t,e){t.entity=e},H=function(t,e){t.pageHistory=e},G=i("e048"),W={namespaced:!1,state:A,getters:o,mutations:n,actions:G},J={schemas:{},feedback:[],dialog:[],entity:void 0,entityDefault:{alopu:{username:void 0,password:void 0}},userAgent:navigator.userAgent,env:window.env,clientId:void 0,registerable:"haventchecked",passwordConfirmation:""},K=i("3c2e")(),X=function(t){return t.entity},Z=function(t){return t.userAgent},Q=function(t,e){return function(i){var o="Bowie",n=K.getsmart(t,"entity.loggedIn",{});return n&&n[e.userAgentNormalised]&&(K.getsmart(t,"entity.alopu.username",!1)?o=K.getsmart(t,"entity.alopu.username",o):!K.getsmart(t,"entity.google.w3.ofa",!1)||"google"!=i&&i?!K.getsmart(t,"entity.facebook.name",!1)||"facebook"!=i&&i||(o=K.getsmart(t,"entity.facebook.name",o).split(" ")[0]):o=K.getsmart(t,"entity.google.w3.ofa",o)),o}},tt=function(t,e){return function(i){var o="Star Man",n=K.getsmart(t,"entity.loggedIn",{});return n&&n[e.userAgentNormalised]&&X.egos,o}},et=function(t,e){return function(i){var o="statics/astronaut.png",n=K.getsmart(t,"entity.loggedIn",{});return n&&n[e.userAgentNormalised]&&(K.getsmart(t,"entity.profilePicture",!1)||(!K.getsmart(t,"entity.google.w3.Paa",!1)||"google"!=i&&i?!K.getsmart(t,"entity.facebook.picture.data.url",!1)||"facebook"!=i&&i||(o=K.getsmart(t,"entity.facebook.picture.data.url",o)):o=K.getsmart(t,"entity.google.w3.Paa",o))),o}},it=function(t,e){var i=K.getsmart(t.entity,"loggedIn",!1),o=i[e.userAgentNormalised];return o||!1},ot=(i("f751"),i("2591")),nt=(i("e71f"),vt()),st=i("3c2e")(),rt=function(t,e){e&&e.id&&(t.schemas[e.id]=e)},at=function(t,e){t.feedback.push(e.feedback)},ct=function(t,e){"number"==typeof e&&t.feedback.splice(e,1)},ut=function(t,e){t.dialog.push(e.dialog)},dt=function(t,e){"number"==typeof e&&t.dialog.splice(e,1)},lt=function(t,e){"boolean"!=typeof e&&"haventchecked"!=e||(t.registerable=e)},gt=function(t,e){e.entity&&(e.merge?Object.assign(t.entity,e.entity):t.entity=e.entity)},pt=function(t,e){t.userAgent=e},ht=function(t,e){var i=st.gosmart(t,"entity.firestore.id",st.getsmart(t,"entity.ids.id-firestore",void 0));if(i){st.setsmart(t,"entity.loggedIn."+e,!0);var o=nt.collection("things"),n=o.doc(i);n.set(t.entity).then(function(){}).catch(function(t){console.error("something went wrong updating the loggedIn userAgent: ",t)})}},ft=function(t,e){t.env=e},mt=function(t,e){t.clientId=e};function vt(){var t={apiKey:"AIzaSyCEk1mYB5aXFjYZUzwhyTF-blYDrIDqTRk",authDomain:"lopu-f3969.firebaseapp.com",databaseURL:"https://lopu-f3969.firebaseio.com",projectId:"lopu-f3969",storageBucket:"lopu-f3969.appspot.com",messagingSenderId:"299513605828",appId:"1:299513605828:web:1f42487525d73e00"},e={timestampsInSnapshots:!0};ot["a"].apps.length?ot["a"].app():ot["a"].initializeApp(t);var i=ot["a"].firestore();return i.settings(e),i}var yt=i("3156"),bt=i.n(yt),wt=(i("7f7f"),i("3c2e")),kt=i.n(wt),Ct=i("bc3a"),At=i.n(Ct),St=i("2b80"),xt=i.n(St),It=u["a"],Tt=new xt.a,_t=Bt(),$t=(_t.collection("things"),kt()()),jt=function(t,e){var i=_t.collection("things");if(e.clientId=t.state.clientId,"facebook"==e.provider&&e.success){var o=$t.getsmart(e,"token.authResponse.userID",void 0);e.entity={ids:{"userID-facebook":o},facebook:{id:o,tokens:[e.token]},registered:{facebook:!0}},n(e).then(function(e){if(e.success){var o=$t.getsmart(e,"entity.firestore.id",!1);o?s(e).then(function(e){var n=i.doc(o),s=$t.gosmart(e,"entity.loggedIn",{});s&&(s[t.getters.userAgentNormalised]=!0),e.entity.facebook&&e.entity.facebook.tokens&&e.entity.facebook.tokens.push(e.token);var r=new Promise(function(t,i){FB.api("/me?locale=en_US&fields=name,email,picture",function(i){i.email&&(e.entity.ids["email-facebook"]=i.email),i&&(Object.assign(e.entity.facebook,i),$t.setsmart(e,"entity.facebook.picture",i.picture)),t(!0)})});r.then(function(){n.set(_.a.parse(_.a.stringify(e.entity)),{merge:!0}).then(function(){e.feedback={message:"Welcome ".concat(e.entity.facebook.name,". You have successfully ").concat(e.newEntity?"signed up":"logged in"," with your Facebook acccount"),color:"positive",timeout:4e3,position:"top-right"},t.dispatch("switchUserSuccess",e)}).catch(function(i){console.error("there was an error processing a login attempt via Facebook because of firebase",i),e.feedback={message:"There was an error logging in with your Facebook account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)})}).catch(function(i){console.error("something went wrong getting more Facebook data to link to the entity: ",i),e.feedback={message:"There was an error logging in with your Facebook account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)})}).catch(function(i){console.error("Something went wrong authenticating the user with firebase: ",i),e.feedback={message:"There was an error logging in with your Facebook account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)}):(console.error("there was an error processing a login attempt via Facebook because there's no firestore id assosciated with the entity, context @param args: ",e),e.feedback={message:"There was an error logging in with your Facebook account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e))}else console.error("there was an error processing a login attempt via Facebook during token authentication server side, context @param args: ",e),e.feedback={message:"There was an error logging in with your Facebook account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)}).catch(function(i){console.error("Something went wrong syncing the user with the database: ",i),e.feedback={message:"There was an error logging in with your Facebook account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)})}else if("google"==e.provider){o=$t.getsmart(e,"token.El",void 0);e.token.w3=Object.assign({},e.token.w3),e.entity={ids:{"El-google":o,"email-google":e.token.w3.U3},google:{id:o,tokens:[e.token]},registered:{google:!0}},n(e).then(function(e){if(e.success){var o=$t.getsmart(e,"entity.firestore.id",!1);o?s(e).then(function(e){var n=i.doc(o),s=$t.gosmart(e,"entity.loggedIn",{});s&&(s[t.getters.userAgentNormalised]=!0),e.entity.google&&e.entity.google.tokens&&e.entity.google.tokens.push(e.token),Object.assign(e.entity.google,e.token),n.set(_.a.parse(_.a.stringify(e.entity)),{merge:!0}).then(function(){e.feedback={message:"Welcome ".concat(e.entity.google.w3.ofa,". You have successfully ").concat(e.newEntity?"signed up":"logged in"," with your Google acccount"),color:"positive",timeout:4e3,position:"top-right"},t.dispatch("switchUserSuccess",e)}).catch(function(i){console.error("there was an error processing a login attempt via Google because of firebase",i),e.feedback={message:"There was an error logging in with your Google account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)})}).catch(function(i){console.error("Something went wrong authenticating the user with firebase: ",i),e.feedback={message:"There was an error logging in with your Google account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)}):(console.error("there was an error processing a login attempt via Google because there's no firestore id assosciated with the entity, context @param args: ",e),e.feedback={message:"There was an error logging in with your Google account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e))}else console.error("there was an error processing a login attempt via facebook during facebook token authentication server side, context @param args: ",e),e.feedback={message:"There was an error logging in with your facebook account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)}).catch(function(i){console.error("Something went wrong syncing the user with the database: ",i),e.feedback={message:"There was an error logging in with your facebook account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)})}else"alopu"!=e.provider&&e.provider||(e.entity=bt()({},t.state.entity,{ids:{"username-alopu":$t.getsmart(e,"entity.alopu.username",$t.getsmart(t,"state.entity.alopu.username",void 0))},registered:{alopu:!0}}),n(e).then(function(e){if(e.success){var o=$t.getsmart(e,"entity.firestore.id",!1);o?s(e).then(function(e){var n=i.doc(o),s=$t.gosmart(e,"entity.loggedIn",{});s&&(s[t.getters.userAgentNormalised]=!0),e.entity.alopu&&e.token&&e.entity.alopu.tokens&&e.entity.alopu.tokens.push(e.token),n.set(_.a.parse(_.a.stringify(e.entity)),{merge:!0}).then(function(){e.feedback={message:"Welcome ".concat(e.entity.alopu.username,". You have successfully ").concat(e.newEntity?"signed up with a":"logged in with your"," Planet Express acccount"),color:"positive",timeout:4e3,position:"top-right"},t.dispatch("switchUserSuccess",e)}).catch(function(i){console.error("there was an error processing a login attempt via Planet Express because of firebase",i),e.feedback={message:"There was an error logging in with your Planet Express account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)})}).catch(function(i){console.error("Something went wrong authenticating the user with firebase: ",i),e.feedback={message:"There was an error logging in with your Planet Express account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)}):(console.error("there was an error processing a login attempt via Planet Express because there's no firestore id assosciated with the entity, context @param args: ",e),e.feedback={message:"There was an error logging in with your Planet Express account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e))}else console.error("there was an error processing a login attempt via facebook during Planet Express token authentication server side, context @param args: ",e),e.feedback={message:"There was an error logging in with your Planet Express account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)}).catch(function(i){console.error("Something went wrong syncing the user with the database: ",i),e.feedback={message:"There was an error logging in with your Planet Express account",color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",e)}));function n(e){return new Promise(function(i,o){if(e.entity||e.provider||e.token||e.clientId){var n={token:e.token,entity:e.entity,provider:e.provider,clientId:e.clientId};At.a.post($t.getsmart(t,"state.env.api.protocol","https://")+$t.getsmart(t,"state.env.api.uri","api.alopu.com")+"/auth",n,Yt).then(function(t){t.data.success&&t.data.entity?i(t.data):(console.error("there was an error authenticating the user server side: ",$t.getsmart(t,"data.error",void 0)),o({success:!1,error:["there was an error authentication the user server side: ",$t.getsmart(t,"data.error","there was an error authentication the user server side")]}))}).catch(function(t){console.error("there was an error authenticating the native user:",t),o({success:!1,error:["there was an error authenticating the native user",t]})})}else e.token||e.provider?e.provider||$t.getsmart(e,"token.provider",!1)||!e.token?o({success:!1,error:"You didn't provide enough arguments to sync a user"}):o({success:!1,error:"We're sorry but right now we need to know the source of a token explicitely to process authentication, it'd be great if they included some kind of auth source in the token"}):o({success:!1,error:"You didn't provide an entity to be authenticated or a provider token or a source, what are we meant to do....?"})})}function s(t){return new Promise(function(e,i){ot["a"].auth().signInWithCustomToken(t.entity.firebase.customToken).then(function(){e(t)}).catch(function(t){console.error("there was an error authenticating the user with firebase: ",t),i({success:!1,error:["there was an error authenticating the user with firebase",t]})})})}},Ot=function(t,e){At()({method:"post",header:Yt.headers,data:{username:e},url:$t.getsmart(t,"state.env.api.protocol","https://")+$t.getsmart(t,"state.env.api.uri","api.alopu.com")+"/usernamecheck"}).then(function(e){e.data.success?e.data.taken?t.commit("registerable",!1):e.data.taken||t.commit("registerable",!0):console.error("something went wrong checking if the username is registerable via the api: ",e.data.error)})},Ft=function(t,e){e.success&&e.entity&&(t.commit("entity",e),e.type="login",t.commit("feedback",e))},Ut=function(t,e){t.dispatch("resetEntity"),t.commit("feedback",e)},Et=function(t,e){var i=Object.assign({},e);if("alopu"==i["provider"]){var o=""==$t.getsmart(t,"state.entity.alopu.password",""),n=$t.getsmart(t,"state.entity.alopu.password",!1)==$t.getsmart(t,"state.passwordConfirmation",0)&&!o||!$t.getsmart(t,"state.registerable",!1);if($t.getsmart(t,"state.entity.alopu.username",!1)&&n){t.commit("passwordConfirmation",""),i["success"]=!0;var s="Logging in";$t.getsmart(t,"state.registerable",!1)&&(s="Signing up"),It.create({message:s,color:"positive",timeout:4e3}),t.dispatch("switchUser",i)}else n||o?$t.getsmart(t,"state.showLoginOptions",!1)&&It.create({message:"Your credentials weren't valid, please try again",color:"warning",timeout:4e3}):It.create({message:"Your passwords didn't match",color:"warning",timeout:4e3});t.commit("showLoginOptions",!0)}i["success"]?t.dispatch("switchUser",i):0==i["success"]&&(console.error("An error occured when processing login from ".concat(i["provider"])),console.error("Here's the res: ",i["token"]),i.feedback={message:"There was an error logging in with your ".concat(i["provider"]," account"),color:"negative",timeout:4e3,position:"top-right"},t.dispatch("switchUserFailure",i))},Mt=function(t,e){var i=setTimeout(function(){},5e3),o=_.a.parse(_.a.stringify($t.getsmart(t,"state.entity",void 0)));t.dispatch("resetEntity");var n,s=_t.collection("things");if(o&&(n=$t.getsmart(o,"firestore.id",$t.getsmart(o,"ids.id-firestore",void 0))),n){var r=s.doc(n),a=o.loggedIn;a&&(a[t.getters.userAgentNormalised]=!1),$t.popThing({option:{clientId:t.state.clientId},list:o.sessions,keys:["clientId"],keymatchtype:"broad"}),o=_.a.parse(_.a.stringify(o)),r.set(o,{merge:!0}).then(function(){clearTimeout(i),t.dispatch("logoutSuccess")}).catch(function(e){clearTimeout(i),t.dispatch("logoutFail"),console.error("there was an error committing logout to firestore: ",e)})}else clearTimeout(i),t.dispatch("logoutFail")},qt=function(t,e){if(t.dispatch("resetEntity"),t.commit("registerable","haventchecked"),!e)e={feedback:{message:"Successfully logged out",color:"positive",timeout:4e3,position:"top-right"}};t.commit("feedback",e)},Nt=function(t,e){if(t.dispatch("resetEntity"),t.commit("registerable","haventchecked"),!e)e={feedback:{message:"Something went wrong logging out, we wiped your data locally just to be safe",color:"info",timeout:4e3,position:"top-right"}};t.commit("feedback",e)},Dt=function(t,e){var i=$t.getsmart(t.state,"entity.loggedIn",!1);(!i||i&&!i[t.getters.userAgentNormalised])&&t.dispatch("resetEntity")},zt=function(t,e){var i=_.a.parse(_.a.stringify(t.state.entityDefault));t.commit("entity",{entity:i})},Pt=function(t,e){t.commit("userAgent",e)},Lt=function(t,e){var i=$t.gosmart(t,"state.entity.inventory.devices",[]),o=t.getters.userAgentNormalised;if(i)var n=$t.getThing({option:{userAgent:o},list:i,keys:["userAgent"],keymatchtype:"broad"});if("this"==e&&n){Tt.setUA(o);var s=Tt.getDevice;Object.assign(n,s)}},Vt=function(t,e){t.state.clientId||t.commit("clientId",e)};function Bt(){var t={apiKey:"AIzaSyCEk1mYB5aXFjYZUzwhyTF-blYDrIDqTRk",authDomain:"lopu-f3969.firebaseapp.com",databaseURL:"https://lopu-f3969.firebaseio.com",projectId:"lopu-f3969",storageBucket:"lopu-f3969.appspot.com",messagingSenderId:"299513605828",appId:"1:299513605828:web:1f42487525d73e00"},e={timestampsInSnapshots:!0};ot["a"].apps.length||ot["a"].initializeApp(t);var i=ot["a"].firestore();return i.settings(e),i.SetOptions={merge:!0},i}var Yt={headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}},Rt={namespaced:!1,state:J,getters:s,mutations:r,actions:a},Ht=i("0f32"),Gt=i.n(Ht),Wt=i("3c2e")({}),Jt=i("3c2e")({vue:{store:!0}}).methods;c["a"].use(w["a"]),window.SS=Jt,window.stateSmarts=Jt,window.resetVuex=window.clearCache=window.clearStorage=function(){try{localStorage.removeItem("vuex"),console.log("done");var t=localStorage.getItem("vuexSource"),e=Wt.parse(t);Jt.setsmart(window,"$store.state.graph.thing",e.thing),localStorage.setItem("vuex",t)}catch(t){Wt.setsmart(window,"errors",[]),window.errors.push(t)}};var Kt=new w["a"].Store({modules:{app:W,alopu:Rt},plugins:[Object(k["a"])({paths:["app","alopu"],merge:function(t,e){return Wt.schema(e,t)},setState:Gt()(function(t,e,i){var o=Wt.stringify(e);i.setItem(t,o)},500),getState:function(t,e){var i={};try{var o=e.getItem(t);if(null===o)return{};i=Wt.parse(o)}catch(o){console.error("error parsing persisted state: ",o),i=JSON.parse(e.getItem(t)||"{}")}return i}})]}),Xt=Kt,Zt=i("8c4f"),Qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.entity||t.entity&&!t.entity.auth?i("div",{staticClass:"register"},[i("div",{staticClass:"register-sizer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.username,expression:"fields.username"}],attrs:{placeholder:"username"},domProps:{value:t.fields.username},on:{input:function(e){e.target.composing||t.$set(t.fields,"username",e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.password,expression:"fields.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.fields.password},on:{input:function(e){e.target.composing||t.$set(t.fields,"password",e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.passwordConfirm,expression:"fields.passwordConfirm"}],attrs:{type:"password",placeholder:"confirm password"},domProps:{value:t.fields.passwordConfirm},on:{input:function(e){e.target.composing||t.$set(t.fields,"passwordConfirm",e.target.value)}}}),i("button",{attrs:{type:"button"},on:{click:t.register}},[t._v("register")]),t.errMsg?i("div",{staticClass:"errMsg"},[t._v(t._s(t.errMsg))]):t._e(),t.feedbackMsg&&t.entity.username?i("div",{staticClass:"feedbackMsg"},[t._v(t._s(t.feedbackMsg))]):t._e()])]):t.entity.username?i("div",{staticClass:"register"},[i("div",{staticClass:"msg thanks"},[t._v(t._s(t.feedbackMsg))])]):t._e()},te=[];Qt._withStripped=!0;var ee={name:"register-comp",data:function(){return{entity:this.$store.state.entity,pageHistory:this.$store.state.pageHistory,fields:{username:null,password:null,passwordConfirm:null},errMsg:null,feedbackMsg:null,uid:this._uid}},sockets:{connect:function(){},giveRegister:function(t){console.log(t),t.success?(this.feedbackMsg=t.msg||"succesfully registered",this.clearFields()):(this.errMsg=t.msg||"there was an error",console.log(t.err))}},created:function(){},methods:{register:function(){if(this.fields.password&&this.fields.password==this.fields.passwordConfirm){var t={username:this.fields.username,password:this.fields.password};console.log("sent register emit"),this.$socket.emit("register",t),this.errMsg=null}else this.errMsg="the passwords do not match"},clearFields:function(){for(var t in this.fields)this.fields.hasOwnProperty(t)&&(this.fields[t]=null)}},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity},"$store.state.pageHistory":function(){this.pageHistory=this.$store.state.pageHistory}},props:{}},ie=ee,oe=(i("0940"),Object(v["a"])(ie,Qt,te,!1,null,"5f725bee",null));oe.options.__file="register.vue";oe.exports;var ne=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"self"},[i("div",{staticClass:"entity-container"}),i("div",{staticClass:"entity-inventories"},[i("thing",{attrs:{thing:t.entity.inventory,parentOptions:["options","inventory","inventory mode","addable","put-options-last"]}})],1)])},se=[];ne._withStripped=!0;var re={data:function(){return{uid:this._uid,entity:this.$store.state.entity}},sockets:{connect:function(){console.log("socket connect vue side")}},created:function(){},methods:{},props:{},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity,this.entity.inventory=this.$store.state.entity.inventory}},components:{},route:{canActivate:function(){return!0}}},ae=re,ce=(i("5d06"),Object(v["a"])(ae,ne,se,!1,null,"48d88022",null));ce.options.__file="self.vue";ce.exports,i("69a2"),i("c220"),i("b2e8");var ue=[{path:"/(|home)",component:function(){return i.e("514a7d30").then(i.bind(null,"7b3d"))},children:[{name:"planetExpress",path:"",component:function(){return Promise.resolve().then(i.bind(null,"c220"))}},{path:"/logout",component:function(){return Promise.resolve().then(i.bind(null,"69a2"))}}]},{path:"*",component:function(){return i.e("4b4818b8").then(i.bind(null,"ee5d"))}}];c["a"].use(Zt["a"]);var de=new Zt["a"]({mode:"history",base:"/",scrollBehavior:function(){return{y:0}},routes:ue}),le=de,ge=function(){var t="function"===typeof Xt?Xt():Xt,e="function"===typeof le?le({store:t}):le;t.$router=e;var i={el:"#q-app",router:e,store:t,render:function(t){return t(b)}};return{app:i,store:t,router:e}},pe=i("a925"),he={failed:"Action failed",success:"Action was successful"},fe={en:he},me=function(t){var e=t.app,i=t.Vue;i.use(pe["a"]),e.i18n=new pe["a"]({locale:"en",fallbackLocale:"en",messages:fe})},ve=function(t){var e=t.Vue;e.prototype.$axios=At.a},ye=i("53bd"),be=function(t){t.app,t.router;var e=t.Vue;e.mixin({data:function(){return{jsmart:ye}}})};window.mapboxgl=i("e192");var we=function(t){t.app,t.router,t.Vue},ke=i("7be2"),Ce=i.n(ke),Ae=function(t){t.app,t.router;var e=t.Vue;e.component("mapbox",Ce.a)},Se=(i("d06d"),i("0874")),xe=function(t){t.app,t.router;var e=t.Vue;e.component("icon",Se["a"])},Ie=i("0e37"),Te=i.n(Ie),_e=function(t){t.app,t.router;var e=t.Vue;e.component("VueImgInputer",Te.a)},$e=i("b76a"),je=i.n($e),Oe=function(t){t.app,t.router;var e=t.Vue;e.component("draggable",je.a)},Fe=i("8055"),Ue=i.n(Fe),Ee=i("0a12"),Me=i.n(Ee),qe=i("568d"),Ne=Ue()("https://"+{uri:"api.alopu.com",protocol:"https://"}.uri,{parser:qe}),De=function(t){t.app,t.router;var e=t.Vue;e.use(Me.a,Ne)},ze=i("4a7a"),Pe=i.n(ze),Le=function(t){t.app,t.router;var e=t.Vue;e.component("v-select",Pe.a)},Ve=i("28dd"),Be=function(t){t.app,t.router;var e=t.Vue;e.use(Ve["a"])},Ye=i("4884"),Re=i.n(Ye),He=function(t){t.app,t.router;var e=t.Vue;e.component("medium-editor",Re.a)},Ge=i("f029"),We=function(t){t.app,t.router;var e=t.Vue;e.use(Ge["a"])},Je=function(t){t.app,t.router;var e=t.Vue,i=new e;e.mixin({data:function(){return{eventHub:i}}})};i("4e28"),i("3902");var Ke=function(t){t.app,t.router,t.Vue},Xe=i("98c9"),Ze=function(t){t.app,t.router;var e=t.Vue;e.use(Xe["a"])},Qe=i("a3ad"),ti=i.n(Qe);window.fbAsyncInit=function(){FB.init({appId:"112687382924264",cookie:!0,xfbml:!0,version:"v2.8"})},function(t,e,i){var o,n=t.getElementsByTagName(e)[0];t.getElementById(i)||(o=t.createElement(e),o.id=i,o.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(o,n))}(document,"script","facebook-jssdk");var ei=function(t){t.app,t.router;var e=t.Vue;e.use(ti.a)},ii=i("4f76"),oi=i.n(ii),ni=function(t){t.app,t.router;var e=t.Vue;e.use(oi.a)},si={apiKey:"AIzaSyCEk1mYB5aXFjYZUzwhyTF-blYDrIDqTRk",authDomain:"lopu-f3969.firebaseapp.com",databaseURL:"https://lopu-f3969.firebaseio.com",projectId:"lopu-f3969",storageBucket:"lopu-f3969.appspot.com",messagingSenderId:"299513605828",appId:"1:299513605828:web:1f42487525d73e00"};ot["a"].apps.length||ot["a"].initializeApp(si);var ri=function(t){t.app,t.router;var e=t.Vue;ot["a"].apps.length?ot["a"].app():ot["a"].initializeApp(si),ot["a"].auth().useDeviceLanguage(),e.$fb=ot["a"]},ai=function(t){t.app,t.router;var e=t.Vue;ot["a"].apps.length?ot["a"].app():ot["a"].initializeApp(config);var i=o();function o(){var t={apiKey:"AIzaSyCEk1mYB5aXFjYZUzwhyTF-blYDrIDqTRk",authDomain:"lopu-f3969.firebaseapp.com",databaseURL:"https://lopu-f3969.firebaseio.com",projectId:"lopu-f3969",storageBucket:"lopu-f3969.appspot.com",messagingSenderId:"299513605828",appId:"1:299513605828:web:1f42487525d73e00"},e={timestampsInSnapshots:!0};ot["a"].apps.length||ot["a"].initializeApp(t);var i=ot["a"].firestore();return i.settings(e),i.SetOptions={merge:!0},i}e.$fs=i},ci=function(t){t.app,t.router;var e=t.Vue;e.prototype.$s=kt()()},ui=i("2b80"),di=new ui;window.$uap=di;var li=function(t){t.app,t.router;var e=t.Vue;e.prototype.$uap=di},gi=ge(),pi=gi.app,hi=gi.store,fi=gi.router;[me,ve,be,we,Ae,xe,_e,Oe,De,Le,Be,He,We,Je,Ke,Ze,ei,ni,ri,ai,ci,li].forEach(function(t){t({app:pi,router:fi,store:hi,Vue:c["a"],ssrContext:null})}),new c["a"](pi)},3902:function(t,e,i){},"3df4":function(t,e,i){},"490c":function(t,e,i){"use strict";var o=i("882e"),n=i.n(o);n.a},"4e28":function(t,e,i){},"5d06":function(t,e,i){"use strict";var o=i("6c3d"),n=i.n(o);n.a},"69a2":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logout"},[i("div",{staticClass:"logout-sizer"},[i("div",{staticClass:"feedbackMsg"},[t._v(t._s(t.$s.getsmart(t.$store,"state.alopu.entity.registered",!1)?"Logging out":"You aren't logged in :O"))])])])},n=[];o._withStripped=!0;var s={name:"logout-comp",data:function(){return{entity:this.$store.state.entity,errMsg:"thanks for logging out",feedbackMsg:"thanks for logging out",uid:this._uid}},sockets:{connect:function(){}},created:function(){console.log(this.$s),this.$store.state.alopu.entity.registered&&this.$store.dispatch("logout"),this.$router.push("/"),this.logout()},methods:{logout:function(){var t={};this.$socket.emit("logout",t)}},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity}},props:{}},r=s,a=(i("ff7c"),i("2877")),c=Object(a["a"])(r,o,n,!1,null,"2a755a0a",null);c.options.__file="logout.vue";e["default"]=c.exports},"6c3d":function(t,e,i){},7:function(t,e){},"7c72":function(t,e,i){"use strict";var o=i("e718"),n=i.n(o);n.a},"7e6d":function(t,e,i){},"882e":function(t,e,i){},"939d":function(t,e,i){},b2e8:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-collapsible",{attrs:{label:"Current Location",avatar:"statics/where.png"}},[i("q-list",[i("q-item",[i("q-item-side",{attrs:{avatar:"statics/devices.png"}}),i("q-item-main",{attrs:{label:"Available Devices",sublabel:"Link a Device"}})],1),t._l(t.$s.gosmart(t.$store,"state.alopu.entity.inventory.devices",[]),function(e){return[i("q-item-separator"),i("q-item",[i("q-item-side",{attrs:{avatar:"statics/"+t.$s.getsmart(e,"type","question-yellow")+".png"}}),i("q-item-main",{attrs:{label:t.$s.getsmart(e,"title",void 0),sublabel:t.$s.getsmart(e,"textAddress","No address known")}}),i("q-item-side",{attrs:{avatar:"statics/location-"+(t.$s.getsmart(e,"livelocation",!1)?"yes":"no")+".png"}})],1)]}),i("q-item-separator"),i("q-item",[i("q-btn",{staticClass:"full-width",attrs:{label:"add a device"}})],1)],2)],1)},n=[];o._withStripped=!0;var s={name:"current-location-nav-comp",data:function(){return{uid:this._uid}},sockets:{connect:function(){}},created:function(){},methods:{},props:{siteTitle:{}},components:{},watch:{},route:{canActivate:function(){return!0}}},r=s,a=(i("d7bf"),i("2877")),c=Object(a["a"])(r,o,n,!1,null,"5c325262",null);c.options.__file="current-location-nav.vue";e["a"]=c.exports},c1fa:function(t,e,i){},c220:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",[i("div",{staticClass:"planetExpress fit"},[i("div",{staticClass:"splash-container"},[i("div",{staticClass:"splash-positioner"},[i("div",{staticClass:"splash"},[i("div",{staticClass:"particles-container"},[i("div",{staticClass:"particles-positioner"},[i("div",{staticClass:"particles"},[i("vue-particles",{staticClass:"vue-particles",attrs:{moveSpeed:2.5,shapeType:"star",color:"#FFF",opacity:.7,particlesNumber:35,particleSize:4,lineOpacity:.3,lineLinked:!1,hoverEffect:!0,hoverMode:"grab"}})],1)])]),i("div",{staticClass:"particles-container"},[i("div",{staticClass:"particles-positioner"},[i("div",{staticClass:"particles"},[i("vue-particles",{staticClass:"vue-particles",attrs:{moveSpeed:2,shapeType:"image",image:{src:"statics/pixel-ship.png"},particlesNumber:3,particleSize:30}})],1)])]),i("div",{staticClass:"search-container"},[i("div",{staticClass:"search-positioner"},[i("div",{staticClass:"search"},[i("div",{staticClass:"addresses-container"},[i("div",{staticClass:"addresses-positioner"},[i("div",{staticClass:"addresses"},[t._l(t.addresses,function(e,o){return e?i("div",{staticClass:"address-container"},[0==o||t.interactionStarted?i("div",{staticClass:"address-positioner"},[i("div",{staticClass:"address"},[i("q-chip",{staticClass:"z-top q-chip-delete q-chip-address-delete",attrs:{floating:!0,color:"negative",small:""},on:{click:function(i){t.removeAddress(e,o)}}},[i("q-icon",{attrs:{name:"close",size:".9rem"}})],1),i("q-search",{staticClass:"bg-primary bg-white q-if-inverted",attrs:{placeholder:0==o?"What's your first address?":"Where else?  We'll reorganize for efficiency","float-label":0==o?"First Address?":"Next?"},model:{value:e.address,callback:function(i){t.$set(e,"address",i)},expression:"address.address"}},[i("q-autocomplete",{on:{search:t.searchAddress,selected:function(e){return t.selectAddress(e,o,"addresses")}}})],1),i("div",{staticClass:"all-goods-container"},[i("div",{staticClass:"all-goods-positioner"},[i("div",{staticClass:"all-goods"},t._l(["pickup","dropoff"],function(o){return i("div",{staticClass:"goods-container"},[i("div",{staticClass:"goods-positioner"},[t.gosmart(e,"goods."+o,[])?i("draggable",{staticClass:"goods",attrs:{options:{group:{name:"goods",pull:"clone"}}},on:{end:t.cacheCurrentAddresses},model:{value:e.goods[o],callback:function(i){t.$set(e.goods,o,i)},expression:"address.goods[actionType]"}},[t._l(t.gosmart(e,"goods."+o,[]),function(n){return i("div",{staticClass:"good"},[i("img",{attrs:{src:"statics/box.png"}}),i("q-chip",{staticClass:"z-top q-chip-delete q-chip-good-delete",attrs:{floating:!0,color:"negative",small:""},on:{click:function(i){t.removeGood(n,e,o)}}},[i("q-icon",{attrs:{name:"close",size:".9rem"}})],1),i("div",{staticClass:"good-name-container"},[i("div",{staticClass:"good-name-positioner"},[i("div",{staticClass:"good-name"},[t._v(t._s(n.name))])])])],1)}),t.gosmart(e,"goods."+o,[]).length<1?i("div",{staticClass:"good placeholder",attrs:{slot:"footer"},slot:"footer"},[i("img",{style:{opacity:.5},attrs:{src:"statics/box.png"}})]):t._e()],2):t._e(),i("div",{staticClass:"add-good",attrs:{slot:"footer"},on:{click:function(i){t.addGood(!1,e,o)}},slot:"footer"},[i("q-btn",{staticClass:"shadow-3 text-primary",attrs:{size:"md",color:"white",label:"add "+o+" box"}})],1)],1)])}))])])],1)]):t._e()]):t._e()}),i("div",{staticClass:"additional-actions-container"},[i("div",{staticClass:"additional-actions-positioner"},[i("div",{staticClass:"additional-actions"},[i("div",{staticClass:"addition-action-container"},[i("div",{staticClass:"additional-action-positioner"},[i("div",{staticClass:"addition-action"},[i("q-btn",{staticClass:"add-address-btn",attrs:{color:"secondary",size:"sm",push:""},on:{click:function(e){t.addAddress({addressType:"addresses",actionSource:"user"})}}},[t._v("Add another stop")])],1)])]),i("div",{staticClass:"addition-action-container"},[i("div",{staticClass:"additional-action-positioner"},[i("div",{staticClass:"addition-action q-pt-md"},[i("q-btn",{staticClass:"full-width",attrs:{color:"secondary","text-color":"white",size:"md",push:""}},[t._v("Lets go!                         ")])],1)])])])])])],2)])])])])])])])])])])},n=[];o._withStripped=!0;i("551c"),i("7f7f");var s=i("3c2e"),r=i.n(s),a={name:"planetExpress-comp",mixins:[r()({vue:{reactiveSetter:!0,vm:"this"}})],data:function(){return{uid:this.$uuid.v4(),currentMap:{names:["courier map"],properties:[{title:"options",type:"Array of Strings","Array of Strings":["show map","no options","hide description"]}]},addresses:this.$store.getters.latestCached,mapboxglAccessToken:"pk.eyJ1IjoibG9wdSIsImEiOiJjamFydTVhc3QxNjRtMzNwaHEzNmJ1bW0zIn0.Wm7f-1eyd7K5AT3WN7fRDw",funCounter:1}},sockets:{connect:function(){},giveUniqueName:function(t){}},created:function(){var t=this;0==this.addresses.length&&this.addAddress({addressType:"addresses"}),navigator.geolocation&&!this.pickupAddress&&navigator.geolocation.getCurrentPosition(function(e){t.getAddressFromCoords(e.coords.longitude,e.coords.latitude).then(function(e){t.setsmart(t,"addresses.0.address",e),t.interactionStarted=!0}).catch(function(t){console.error(t)})})},methods:{cacheCurrentAddresses:function(){this.$store.commit("addCachedState",this.addresses)},addAddress:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.address,i=void 0===e?{names:["address"],address:void 0,goods:{},uid:this.$uuid.v4()}:e;t.actionSource;i&&(this.pushThing({option:i,list:this.gosmart(this,"addresses",[]),obj:!0,keys:["uuid"]}),this.cacheCurrentAddresses(),this.interactionStarted||(this.interactionStarted=!0))},removeAddress:function(t,e,i){var o=this;t&&(e||0==e)&&(void 0!==t.address?t.address=void 0:this.addresses.length<=1&&0==this.getsmart(t,"goods.pickup.length",0)&&0==this.getsmart(t,"goods.dropoff.length",0)&&void 0==t.address?this.$q.dialog({title:"Message",message:"Sorry but you can't remove the last empty address",ok:"got it"}):this.$q.dialog({title:"Warning",message:"This will remove the whole stop including all pickups and dropoffs",ok:"got it",cancel:"no no no no"}).then(function(){o.addresses.splice(e,1),o.$q.notify({message:"easy",color:"positive",timeout:1e3})}).catch(function(){}),this.interactionStarted=!0,this.cacheCurrentAddresses())},addGood:function(t,e,i){var o=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.funCounter;if(!t){this.funCounter++;var s={name:t,address:e,addressType:i,funCounter:n};this.$socket.emit("getUniqueName",s),this.$options.sockets["giveUniqueName"]=function(t){if(t.funCounter==n){var i={names:["good"],name:t.name,uuid:t.uuid};o.setsmart(i,t.addressType,e),console.log("adding good"),console.log("data"),console.log(t),console.log("address"),console.log(e),o.setThing({option:i,list:o.gosmart(e,"goods."+t.addressType,[]),obj:"debug",keys:["uuid"],push:!0}),o.cacheCurrentAddresses()}}}},removeGood:function(t,e,i){t&&e&&i&&(console.log("removing"),this.popThing({option:t,list:this.gosmart(e,"goods."+i,[]),keys:["uuid","_id"],keymatchtype:"broad"}),this.cacheCurrentAddresses())},tryGeojson:function(t){if(this.getsmart(t,"coords",void 0)&&this.getsmart(t,"coords.latitude",void 0)&&this.getsmart(t,"coords.longitude",void 0)){var e={center:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],geometry:{coordinates:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],type:"Point"}};return e}return t},getAddressFromCoords:function(t,e){var i=this;return new Promise(function(o,n){var s="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+","+e+".json?access_token="+i.mapboxglAccessToken+"&types=address";i.$http.get(s).then(function(t){o(t.body.features[0].place_name)}).catch(function(t){console.error(t),n(t)})})},autoCompleteAddress:function(t){var e=this;return new Promise(function(i,o){var n="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+".json?access_token="+e.mapboxglAccessToken+"&types=address";e.$http.get(n).then(function(t){i(t.body.features)}).catch(function(t){console.error(t),o(t)})})},searchAddress:function(t,e){this.autoCompleteAddress(t).then(function(t){for(var i=[],o=0;o<t.length;o++)i.push({label:t[o].place_name});e(i)}).catch(function(t){console.error(t)})},selectAddress:function(t,e,i,o){t&&(e||0==e)&&i&&(this.setsmart(this,i+"."+e+".address",t.label),this.interactionStarted=!0)}},computed:{interactionStarted:{get:function(){return this.$store.state.app.interactionStarted},set:function(t){this.$store.commit("interactionStarted",t)}}},props:{siteTitle:{}},components:{},watch:{addresses:function(){0==this.addresses.length&&this.addAddress(),this.cacheCurrentAddresses()}},route:{canActivate:function(){return!0}}},c=a,u=(i("7c72"),i("2ae2"),i("2877")),d=Object(u["a"])(c,o,n,!1,null,null,null);d.options.__file="planetExpress.vue";e["default"]=d.exports},cf25:function(t,e,i){"use strict";var o=i("2b3b"),n=i.n(o);n.a},d7bf:function(t,e,i){"use strict";var o=i("db42"),n=i.n(o);n.a},db42:function(t,e,i){},e048:function(t,e){},e718:function(t,e,i){},ff7c:function(t,e,i){"use strict";var o=i("3df4"),n=i.n(o);n.a}},[[0,"runtime","vendor"]]]);